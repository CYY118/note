# 单例设计模式

模式定义：保证一个类只有一个实例，并且提供一个全局访问点

场景：

> 重量级的对象，不需要多个实例，如线程池，数据库连接池

![image-20230608103443726](https://gitee.com/yangstudys/typora-pic/raw/master/prcture/202306081034850.png)

> "-"	：表示私有
>
> “+”	：表示共有

1. 懒汉模式：延迟加载，只有在真正使用的时候，才开始实例化

   1. 线程池安全问题
   2. double check 加锁优化
   3. 编译器（JIT），CPU有可能对指令进行重排序，导致使用到尚未初始化的实例，可以通过添加Volatile关键字进行修饰。对于Volatile修饰字段，可以防止指令重排

2. 饿汉模式：

   类加载的 初始化阶段就完成了实例的初始化。本质上就是借助于jvm类加载机制，保证实例的唯一性

   类加载过程：

   1. 